<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>xgb多GPU训练教程 | Yuquan</title>
<meta name="keywords" content="" />
<meta name="description" content="1. 背景 xgb在gpu训练上速度很快，单个就几秒钟解决。但是涉及到超参数的搜索，希望速度更快，因而需要多卡训练。
想象一下假设有6个参数，每个有6个取值，6^6=4.6万个参数组合。即使训练一轮只需要30秒，全部搜索下来也需要16天。如果有四个显卡加速，就只需要4天。
2. 首先安装环境和各种用得到的包 2.1. 创建一个py0的环境 conda create -n py10 python=3.10
目前cudf仅仅支持到3.10，不要冲到3.11去了
2.2. 各种包 conda install -c conda-forge jupyterlab jupyterlab_code_formatter pandas seaborn plotnine python-lsp-server autopep8 py-xgboost-gpu scikit-learn dask dask-ml dask-cuda -y
2.3. 这个dask-cudf比较难搞 先装cudf conda install -c rapidsai -c conda-forge -c nvidia cudf=23.04 cudatoolkit=11.8
再装dask-cudf conda install -c rapidsai dask-cudf
3. 编一个数据集 DSS的华人编辑 Editorial Advisory Board Sulin Ba, University of Connecticut, Storrs, Connecticut, United States of America Senior Editors Zhiling Guo, Singapore Management University, Singapore, Singapore Wenjing (Wendy) Duan, The George Washington University, Washington, District of Columbia, United States of America Benjamin Shao, PhD, Arizona State University, Tempe, Arizona, United States of America Chih-Ping Wei, PhD, National Taiwan University, Taipei, Taiwan J.">
<meta name="author" content="Yuquan">
<link rel="canonical" href="/posts/xgb%E5%A4%9Agpu%E8%AE%AD%E7%BB%83%E6%95%99%E7%A8%8B/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.29f8ec3d41bdc6b8c6285e3876c53f7692399e65b1e548daa88820758769e662.css" integrity="sha256-KfjsPUG9xrjGKF44dsU/dpI5nmWx5UjaqIggdYdp5mI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.f31140db67161625dbdecd790d867c07e4599ecbd77dc7e79a788c294e4bbbf2.js" integrity="sha256-8xFA22cWFiXb3s15DYZ8B&#43;RZnsvXfcfnmniMKU5Lu/I="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/images/ghost-2.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/ghost-2.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/ghost-2.png">
<link rel="apple-touch-icon" href="/images/ghost-2.png">
<link rel="mask-icon" href="/images/ghost-2.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="" accesskey="h" title="Yuquan (Alt + H)">Yuquan</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home"><span>HOME</span></a>
            </li>
            <li>
                <a href="/pubs/" title="RESEARCH">
                    <span>RESEARCH</span>
                </a>
            </li>
            <li>
                <a href="/about/" title="ABOUT">
                    <span>ABOUT</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="">Home</a>&nbsp;»&nbsp;<a href="/posts/">Posts</a></div>
    <h1 class="post-title">
      xgb多GPU训练教程
    </h1>
  </header> 
  <div class="post-content">
<h1 id="1-背景">1. 背景</h1>
<p>xgb在gpu训练上速度很快，单个就几秒钟解决。但是涉及到超参数的搜索，希望速度更快，因而需要多卡训练。</p>
<p>想象一下假设有6个参数，每个有6个取值，6^6=4.6万个参数组合。即使训练一轮只需要30秒，全部搜索下来也需要16天。如果有四个显卡加速，就只需要4天。</p>
<h1 id="2-首先安装环境和各种用得到的包">2. 首先安装环境和各种用得到的包</h1>
<h2 id="21-创建一个py0的环境">2.1. 创建一个py0的环境</h2>
<p><code>conda create -n py10 python=3.10</code></p>
<p>目前cudf仅仅支持到3.10，不要冲到3.11去了</p>
<h2 id="22-各种包">2.2. 各种包</h2>
<p><code>conda install -c conda-forge jupyterlab jupyterlab_code_formatter pandas seaborn plotnine python-lsp-server autopep8  py-xgboost-gpu scikit-learn dask dask-ml dask-cuda -y</code></p>
<h2 id="23-这个dask-cudf比较难搞">2.3. 这个dask-cudf比较难搞</h2>
<p>先装<code>cudf</code>
<code>conda install -c rapidsai -c conda-forge -c nvidia cudf=23.04 cudatoolkit=11.8</code></p>
<p>再装<code>dask-cudf</code>
<code>conda install -c rapidsai dask-cudf</code></p>
<h1 id="3-编一个数据集">3. 编一个数据集</h1>
<h1 id="dss的华人编辑">DSS的华人编辑</h1>
<h2 id="editorial-advisory-board">Editorial Advisory Board</h2>
<ol>
<li>Sulin Ba, University of Connecticut, Storrs, Connecticut, United States of America</li>
</ol>
<h2 id="senior-editors">Senior Editors</h2>
<ol>
<li>Zhiling Guo, Singapore Management University, Singapore, Singapore</li>
<li>Wenjing (Wendy) Duan, The George Washington University, Washington, District of Columbia, United States of America</li>
<li>Benjamin Shao, PhD, Arizona State University, Tempe, Arizona, United States of America</li>
<li>Chih-Ping Wei, PhD, National Taiwan University, Taipei, Taiwan</li>
<li>J. Leon Zhao, The Chinese University of Hong Kong, Hong Kong, Hong Kong</li>
<li>Kexin Zhao, Ph.D., UNC Charlotte, Charlotte, North Carolina, United States of America</li>
<li>Xia Zhao, UNC Greensboro, Greensboro, North Carolina, United States of America</li>
<li>Lina Zhou, UNC Charlotte, Charlotte, North Carolina, United States of America</li>
</ol>
<h2 id="associate-editors">Associate Editors</h2>
<ol>
<li>Hsin-Lu Chang, PhD, National Chengchi University, Taipei, Taiwan</li>
<li>Rui Chen,Iowa State University, Ames, Iowa, United States of America</li>
<li>Zhiyuan Chen, University of Maryland Baltimore County, Baltimore, Maryland, United States of America</li>
<li>Yen-Chun Chou, PhD, National Chengchi University, Taipei, Taiwan</li>
<li>Yanqing Duan, PhD, University of Bedfordshire Business School, Luton, UK</li>
<li>Shaokun Fan, Oregon State University College of Business, Corvallis, Oregon, United States of America</li>
<li>S.M. Huang, PhD, National Chung Cheng University, Minxiong, Taiwan</li>
<li>Teng Huang, Sun Yat-Sen University, Guangzhou, China</li>
<li>Hongbing Jiang, City University of Hong Kong, Hong Kong, Hong Kong</li>
<li>Yong (Jimmy) Jin, PhD, The Hong Kong Polytechnic University, Hong Kong, Hong Kong</li>
<li>Chen Li, Fayetteville State University, Fayetteville, North Carolina, United States of America</li>
<li>D. Li, PhD, University of Minnesota Duluth, Duluth, Minnesota, United States of America</li>
<li>Der-Chiang Li, National Cheng Kung University, Tainan, Taiwan</li>
<li>Xiaobai Li, University of Massachusetts Lowell, Lowell, Massachusetts, United States of America</li>
<li>Winston Lin, PhD, University at Buffalo, Buffalo, New York, United States of America</li>
<li>Zhangxi Lin, Texas Tech University, Lubbock, Texas, United States of America</li>
<li>Mei Liu, University of Kansas Medical Center School of Nursing, Kansas City, Kansas, United States of America</li>
<li><strong>Xin (Robert) Luo, PhD</strong>, The University of New Mexico, Albuquerque, New Mexico, United States of America</li>
<li>Eric Ngai, PhD, The Hong Kong Polytechnic University, Hong Kong, Hong Kong</li>
<li>Liangfei Qiu, University of Florida, Gainesville, Florida, United States of America</li>
<li>Geng Sun, The University of Texas Rio Grande Valley, Brownsville, Texas, United States of America</li>
<li>Gang Wang, University of Delaware, Newark, Delaware, United States of America</li>
<li>Jingguo Wang, The University of Texas at Arlington, Arlington, Texas, United States of America</li>
<li>Lei (Michelle) Wang, The Pennsylvania State University, University Park, Pennsylvania, United States of America</li>
<li>Jennifer Xu, PhD, Bentley University, Waltham, Massachusetts, United States of America</li>
<li>Cathy (Liu) Yang, HEC Paris, Jouy-en-Josas, France</li>
<li>Fang Yin, Senior Instructor, University of Oregon, Eugene, Oregon, United States of America</li>
<li>Dongsong Zhang, PhD, UNC Charlotte, Charlotte, North Carolina, United States of America</li>
<li>Julie Zhang, PhD,University of Massachusetts Lowell, Lowell, Massachusetts, United States of America</li>
<li>Wei Zhou, PhD, ESCP Business School, Paris, France</li>
</ol>
<h1 id="dss的大陆学者">DSS的大陆学者</h1>
<h2 id="editorial-advisory-board-1">Editorial Advisory Board</h2>
<ol>
<li><strong>Jae Kyu Lee, PhD</strong>, Xi&rsquo;an Jiaotong University, Xian, China</li>
</ol>
<h2 id="senior-editors-1">Senior Editors</h2>
<h2 id="associate-editors-1">Associate Editors</h2>
<ol>
<li><strong>Weiling Ke</strong>, Southern University of Science and Technology, Shenzhen, Guangdong, China</li>
<li>Gang Kou, Southwestern University of Finance and Economics, Chengdu, China</li>
<li><strong>Shan Liu, PhD</strong>, Xi&rsquo;an Jiaotong University, Xian, China</li>
<li>Qiang Wei,Tsinghua University, Beijing, China</li>
</ol>
<h1 id="参考文献里的dss的学者">参考文献里的DSS的学者</h1>
<ol>
<li>Kadar, C. , ETH Zurich, Weinbergstr. 56/58, 8092 Zurich, Switzerland</li>
<li>Maculan, R. , ETH Zurich, Weinbergstr. 56/58, 8092 Zurich, Switzerland</li>
<li>Feuerriegel, S. , ETH Zurich, Weinbergstr. 56/58, 8092 Zurich, Switzerland</li>
<li>Vomfell, Lara, Warwick Business School, University of Warwick, Coventry CV4 7AL, UK</li>
<li>Härdle, Wolfgang Karl, Singapore Management University, 50 Stamford Road, Singapore 178899, Singapore</li>
<li>Lessmann, Stefan, Faculty of Business and Economics, Humboldt University of Berlin, Unter den Linden 6, Berlin 10099, Germany</li>
<li>Willing, Christoph, University of Freiburg, Germany</li>
<li>Klemmer, Konstantin, Imperial College London, United Kingdom</li>
<li>Brandt, Tobias, Rotterdam School of Management, Erasmus University, Netherlands</li>
<li>Neumann, Dirk, University of Freiburg, Germany</li>
</ol>

  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    
    
    <div><span> <a href="">Yuquan</a> 
        , 2019 - 2023,  Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> 
    </span></div>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
